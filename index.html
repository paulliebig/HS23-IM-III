<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Musilytics</title>

  <!-- Leaflet CSS einbinden -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <style>
    #map {
      height: 600px;
      width: 100%;
      margin-bottom: 20px;
      border-radius: 50px;
    }
  </style>

  <!-- Include Chart.js for graph -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="hintergrund">
  <h1>Musilytics</h1>

  <div class="search">
    <!-- Dropdown für Musikrichtungen -->
    <label for="genre">Musikrichtung auswählen:</label>
    <select id="genre">
      <option value="rock">Rock</option>
      <option value="pop">Pop</option>
      <option value="hip-hop">Hip-Hop</option>
      <option value="electronic">Electronic</option>
      <option value="jazz">Jazz</option>
    </select>

    <!-- Datumsauswahl-Feld -->
<label for="datePicker">Datum auswählen:</label>
<input type="date" id="datePicker" value="" min="2024-10-14">

    <!-- Interaktive Karte für Länder -->
    <div id="map"></div>
  </div>

  <!-- Platzhalter für das ausgewählte Land 
  <h3 id="selected-country">Aktuell ausgewähltes Land: Schweiz</h3>
-->
  <div class="results-container">
    <!-- Bereich für die Anzeige der Top-Songs -->
    <div class="box" id="songs-box">
      <h2>Top Songs</h2>
      <div id="spotify-songs"></div>
    </div>

    <!-- Bereich für die Anzeige der Top-Künstler -->
    <div class="box" id="artists-box">
      <h2>Top Künstler</h2>
      <div id="spotify-artists"></div>
    </div>
  </div>

  <div class="textbox" id="textbox1">
    <p>Die Musikcharts bieten einen faszinierenden Einblick in die 
      musikalischen Vorlieben und Entwicklungen einer bestimmten Zeit. 
      Sie zeigen, welche Künstler und Songs besonders großen Einfluss 
      hatten und wie sich Trends in der Musikwelt veränderten. 
      Ob etablierte Grössen oder aufstrebende Talente - 
      die Rankings verdeutlichen, wie vielfältig und 
      dynamisch die Musiklandschaft zu verschiedenen 
      Zeitpunkten war. Diese Übersicht lädt dazu ein, 
      die musikalischen Highlights einer bestimmten Epoche 
      zu entdecken und zu verstehen, welche Klänge zu dieser 
      Zeit besonders im Fokus standen.</p>
    </div>
    

  


 <div class="alltime"> <!-- Dropdown für die Musikauswahl -->
  <label for="trendGenre">Musikrichtung auswählen (für All-Time Entwicklung):</label>
  <select id="trendGenre">
    <option value="rock">Rock</option>
    <option value="pop">Pop</option>
    <option value="hip-hop">Hip-Hop</option>
    <option value="electronic">Electronic</option>
    <option value="jazz">Jazz</option>
  </select>
  <button onclick="getGenreTrendsOverYears()">Genre-Trends anzeigen</button>
</div> 

  <!-- Bereich für die Anzeige der Genre-Trends Grafik -->
  <canvas id="genreChart" width="400" height="200"></canvas>

  <div class="textbox" id="textbox2">
    <p>Die Grafik veranschaulicht die Entwicklung der Beliebtheit des 
      ausgewählten Musikgenres über einen Zeitraum von fünf Jahren.
       Durch die Berechnung des 5-Jahres-Durchschnitts lassen sich 
       langfristige Trends und Veränderungen in den Hörgewohnheiten 
       der Menschen erkennen. Diese Methode hilft, einen klareren 
       Blick auf die allgemeine Entwicklung des Genres zu werfen.
        Die dargestellten Daten bieten wertvolle Einblicke in die 
        kulturelle Bedeutung und den Stellenwert des Genres im Laufe 
        der Jahre und zeigen, wie sich dessen Popularität im Vergleich 
        zu anderen musikalischen Strömungen verändert hat.</p>
    </div>

  <!-- Bereich für die Abfrage der Spotify-Genre-Popularität -->
  <div class="titelevents"><h2>Spotify Genre Streams Analyse</h2></div>
  <label for="streamCountry">Land auswählen (für Genre Streams):</label>
  <select id="streamCountry">
    <option value="US">USA</option>
    <option value="BR">Brasilien</option>
    <option value="GB">Großbritannien</option>
    <option value="DE">Deutschland</option>
    <option value="CH">Schweiz</option>
    <option value="JP">Japan</option>
  </select>
  <button onclick="searchTopGenresStreams()">Genre Streams anzeigen</button>

 

  <!-- Bereich für die Anzeige des Spotify-Genre-Streams Balkendiagramms -->
  <canvas id="genreStreamChart" width="400" height="200"></canvas>

  <!-- Leaflet JS einbinden -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

  <!-- Verknüpfung zum JavaScript-File -->
  <script src="events.js"></script>

  <!-- LocationIQ API zur Umwandlung von Koordinaten in Ortsnamen -->
  <script>
    const locationIQApiKey = 'pk.a00653df4d05d09645fc72e5f5839155'; // Dein LocationIQ API-Key

   

    const interactiveCountries = ['CH', 'US', 'BR', 'DE', 'GB', 'JP'];
    selectedCountry = ''; // Gespeicherte Auswahl des Landes

    // Karte initialisieren

    const map = L.map('map').setView([20, 0], 2);
    // OpenStreetMap-Kacheln hinzufügen
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // GeoJSON-Datei für Ländergrenzen laden
    fetch('https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json')
      .then(response => response.json())
      .then(geojsonData => {
        L.geoJSON(geojsonData, {
          style: function (feature) {
            if (interactiveCountries.includes(feature.properties.iso_a2)) {
              return { color: "#3388ff", weight: 2, opacity: 1, fillOpacity: 0.7 };
            } else {
              return { color: "#cccccc", weight: 1, opacity: 0.5, fillOpacity: 0.2 };
            }
          },
          onEachFeature: function (feature, layer) {
            if (interactiveCountries.includes(feature.properties.iso_a2)) {
              layer.on('click', function () {
                selectedCountry = feature.properties.iso_a2;
                alert('Gewähltes Land: ' + feature.properties.name);
                document.getElementById('streamCountry').value = selectedCountry;
              });
            }
          }
        }).addTo(map);
      })
      .catch(error => console.error('Fehler beim Laden der GeoJSON-Daten:', error));



    function searchEventsAndTopInSelectedCountry() {
      const genre = document.getElementById('genre').value;

      if (!selectedCountry) {
        alert("Bitte wähle ein Land auf der Karte aus.");
        return;
      }

      console.log('Suche Events und Daten für das Land:', selectedCountry);
    }
  </script>

<div class="textbox" id="textbox3">
  <p>Das Balkendiagramm bietet einen direkten Vergleich der Popularität von fünf Musikgenres im ausgewählten Land. Die Popularitäts-Scores, die auf einer Skala von 1 bis 100 angegeben werden, ermöglichen es, auf einen Blick zu erkennen, welche Genres in der jeweiligen Region am beliebtesten sind. Diese visuelle Darstellung macht es leicht, Trends zu identifizieren und herauszufinden, wie stark die einzelnen Genres im Vergleich zueinander stehen. Solche Analysen bieten wertvolle Einblicke in regionale Musikpräferenzen und zeigen, wie kulturelle Unterschiede die musikalischen Vorlieben beeinflussen können.</p>
  </div>
</body>
</html>